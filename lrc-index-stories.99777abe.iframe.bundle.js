"use strict";(self.webpackChunkreact_lrc=self.webpackChunkreact_lrc||[]).push([[891],{"./examples/control.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var styled_components__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/jsx-runtime.js");const Style=styled_components__WEBPACK_IMPORTED_MODULE_1__.Ay.div`
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 20px;
  background: rgb(222 222 222);
`;function Control(_ref){let{onPlay,onPause,onReset,current,setCurrent,recoverAutoScrollImmediately}=_ref;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)(Style,{children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",{type:"button",onClick:onPlay,children:"play"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",{type:"button",onClick:onPause,children:"pause"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",{type:"button",onClick:onReset,children:"reset"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("input",{type:"number",value:current,onChange:event=>setCurrent(Number(event.target.value))}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("button",{type:"button",onClick:recoverAutoScrollImmediately,children:"recover auto scroll immediately"})]})}Control.displayName="Control";const __WEBPACK_DEFAULT_EXPORT__=Control;try{Control.displayName="Control",Control.__docgenInfo={description:"",displayName:"Control",props:{onPlay:{defaultValue:null,description:"",name:"onPlay",required:!0,type:{name:"() => void"}},onPause:{defaultValue:null,description:"",name:"onPause",required:!0,type:{name:"() => void"}},onReset:{defaultValue:null,description:"",name:"onReset",required:!0,type:{name:"() => void"}},current:{defaultValue:null,description:"",name:"current",required:!0,type:{name:"number"}},setCurrent:{defaultValue:null,description:"",name:"setCurrent",required:!0,type:{name:"(c: number) => void"}},recoverAutoScrollImmediately:{defaultValue:null,description:"",name:"recoverAutoScrollImmediately",required:!0,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["examples/control.tsx#Control"]={docgenInfo:Control.__docgenInfo,name:"Control",path:"examples/control.tsx#Control"})}catch(__react_docgen_typescript_loader_error){}},"./examples/data.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Ru:()=>originalLrc,Yc:()=>translatedLrc,gJ:()=>lrc});const lrc="[00:00.90]昨夜点的灯还亮著 你的世界却暗了\n[00:08.23]你若无其事的笑 让人 心疼\n[00:16.17]不问你到底怎么了\n[00:19.75]只紧紧拥抱著\n[00:23.37]静静让你的泪冲淡苦涩和 伤痕\n[00:32.51]\n[00:33.50]别再哭了 别再难过了 还有我在呢\n[00:41.06]在这一刻 别后悔了\n[00:45.84]再多的傻和错 一笑带过\n[00:50.38]Please don't cry everything will be fine\n[00:55.71]放下所有遗憾 呜\n[01:01.76]转身之后 有我为你而守候\n[01:09.46]\n[01:24.23]结痂的伤口 还醒著 你的天真 沉睡了\n[01:32.14]你对爱不再期待 我该 懂了\n[01:40.07]你说著曾被他爱著\n[01:43.73]他和她却走了\n[01:47.22]我懂我 只算你故事里 第三人称\n[01:55.22]别再哭了 别再难过了 还有我在呢\n[02:03.13]在这一刻 别后悔了\n[02:07.78]再多的伤和痛 终会是梦\n[02:11.96]Please don't cry everything will be fine\n[02:17.79]拥抱你的勇敢 呜\n[02:23.65]转身之后 有我为你而守候\n[02:28.86]我们曾 越过曲折\n[02:32.64]我们曾 有失有得\n[02:36.76]我们曾 笑谈人生 有你就够了\n[02:43.89]别再哭了 别再难过了 还有我在呢\n[02:51.16]在这一刻 别后悔了\n[02:55.68]再多的伤和痛 终会是梦\n[03:00.03]Please don't cry everything will be fine\n[03:05.70]某天再遇到爱 呜\n[03:14.18]遗忘了我 我仍为你而守候",originalLrc="[00:13.62]最後の電車を逃して並んでる\n[00:23.70]うつむいた横顔に君の気持を探す\n[00:32.37]\n[00:33.01]離れた間に僕らはいつも忘れるフリをしていた\n[00:42.84]誰かを愛する優しささえも そっと記憶にしまって\n[00:54.35]\n[00:54.92]今 午前２時の交差点で\n[01:00.03]あの頃のように見つめ合って\n[01:05.20]戻らない季節を取り戻したいわけじゃない\n[01:11.60]だけど 今君を見てたい\n[01:17.68]\n[01:18.95]変わらない背中の少し後ろを歩く 懐かしいよ\n[01:28.76]振り向いて笑うのはどんな意味かな 君は何を思うの\n[01:38.17]\n[01:38.85]記憶の扉が解き放たれて 引き寄せてしまいそうでも\n[01:48.51]同じ痛みを繰り返したくない そうさ このまま このまま\n[02:00.03]\n[02:00.70]今 午前２時の交差点で\n[02:05.72]あの頃よりも惹かれ合って\n[02:11.05]あと一歩進めば時計の針も進む\n[02:17.53]だから 今抱きしめたい\n[02:22.19]\n[02:23.15]触れたい触れられない距離 問い掛ける目も\n[02:32.25]多分もう隠せない この想いで同じ顔をしている\n[02:42.32]君といたい\n[02:45.51]\n[02:46.18]ねえこんな日を夢見てた\n[02:51.06]あの頃よりもずっと強く\n[02:56.19]探してた何かを見つけた気がしている\n[03:02.79]君を 君を\n[03:06.39]今 午前２時の交差点で\n[03:11.31]あの頃のように見つめ合って\n[03:16.40]戻らない季節を取り戻したいわけじゃない\n[03:22.99]だけど 今君を見てたい\n[03:27.80]本当に大切なモノに気付けるまで\n[03:32.43]少し長い時間(とき)が過ぎた\n[03:37.38]繋いだ手は二度と離さないでそばにいてね\n[03:44.58]また君とふたり",translatedLrc="[00:13.62]错过了末班电车，我们并肩站在原地。\n[00:23.70]身边的你低着头，我试图揣测你的心\n[00:32.37]\n[00:33.01]离别的瞬间，我们总是。佯装忘却的样子。\n[00:42.84]就连爱一个人的温柔也，静静地锁紧记忆里\n[00:54.35]\n[00:54.92]现在，在凌晨2点的十字路口\n[01:00.03]我们如当初凝视着彼此\n[01:05.20]我并不是想取回 再也回不去的时间\n[01:11.60]可，现在我只想，就这么看着你\n[01:17.68]\n[01:18.95]不变的背影，我就在你身后。莫名怀念的感觉\n[01:28.76]你转身的笑容，代表什么意思呢？你在想什么？\n[01:38.17]\n[01:38.85]记忆的门扉就此打开，虽想把你拉进我怀里\n[01:48.51]可我不想再经历同样的伤痛。是啊，就这样，这样就好\n[02:00.03]\n[02:00.70]现在，在凌晨2点的十字路口\n[02:05.72]比起那时，更加被对方吸引\n[02:11.05]再前进一步，时钟的指针也会向前进\n[02:17.53]所以，现在我只想静静抱住你\n[02:22.19]\n[02:23.15]想要触碰却无法触及的距离，双眼不禁产生疑问\n[02:32.25]也许这份爱恋，再也藏不住\n[02:42.32]我还想和，露出相同神情的你在一起\n[02:45.51]\n[02:46.18]呐这曾是我梦寐以求的一天\n[02:51.06]比那时还要更加坚定\n[02:56.19]我感觉，我已经找到，我一路寻找的东西\n[03:02.79]是你，是你\n[03:06.39]现在，在凌晨2点的十字路口\n[03:11.31]我们如当初凝视着彼此\n[03:16.40]我并不是想取回 再也回不去的时间\n[03:22.99]可，现在我只想\n[03:27.80]就这么看着你\n[03:32.43]花了太长的时间，我才察觉到真正重要的是什么\n[03:37.38]再不要放开相牵的手，留在我身边\n[03:44.58]再次和你携手"},"./examples/use_timer.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js");const __WEBPACK_DEFAULT_EXPORT__=function useTimer(){let speed=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const[paused,setPaused]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),play=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((()=>setPaused(!1)),[]),pause=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((()=>setPaused(!0)),[]),[currentMillisecond,setCurrentMillisecond]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0),reset=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((()=>setCurrentMillisecond(0)),[]);return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{if(!paused){let last=Date.now();const timer=globalThis.setInterval((()=>{const now=Date.now();setCurrentMillisecond((cm=>cm+(now-last)*speed)),last=now}),97);return()=>globalThis.clearInterval(timer)}}),[paused,speed]),{currentMillisecond,setCurrentMillisecond,reset,paused,play,pause}}},"./examples/utils.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function formatMillisecond(ms){const minute=Math.floor(ms/1e3/60),second=Math.floor(ms/1e3)%60,millisecond=ms%1e3;return`${minute.toString().padStart(2,"0")}:${second.toString().padStart(2,"0")}.${millisecond.toString().padStart(3,"0")}`}__webpack_require__.d(__webpack_exports__,{l:()=>formatMillisecond})},"./examples/lrc/index.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{AutoScroll:()=>AutoScroll,Static:()=>Static,__namedExportsOrder:()=>__namedExportsOrder,default:()=>index_stories});var styled_components_browser_esm=__webpack_require__("./node_modules/styled-components/dist/styled-components.browser.esm.js"),src=__webpack_require__("./src/index.ts"),utils=__webpack_require__("./examples/utils.ts"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const Line=styled_components_browser_esm.Ay.div`
  > .time {
    color: orange;
    font-family: monospace;
  }
`;function StaticLrc(_ref){let{lrc}=_ref;return(0,jsx_runtime.jsx)(src.K2,{lrc,lineRenderer:_ref2=>{let{line}=_ref2;return(0,jsx_runtime.jsxs)(Line,{children:[(0,jsx_runtime.jsx)("span",{className:"time",children:(0,utils.l)(line.startMillisecond)})," ",line.content]})}})}StaticLrc.displayName="StaticLrc";const lrc_static=StaticLrc;try{StaticLrc.displayName="StaticLrc",StaticLrc.__docgenInfo={description:"",displayName:"StaticLrc",props:{lrc:{defaultValue:null,description:"",name:"lrc",required:!0,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["examples/lrc/static.tsx#StaticLrc"]={docgenInfo:StaticLrc.__docgenInfo,name:"StaticLrc",path:"examples/lrc/static.tsx#StaticLrc"})}catch(__react_docgen_typescript_loader_error){}var use_timer=__webpack_require__("./examples/use_timer.ts"),control=__webpack_require__("./examples/control.tsx");const Root=styled_components_browser_esm.Ay.div`
  position: absolute;
  width: 100%;
  height: 100%;
  top: 0;
  left: 0;

  display: flex;
  flex-direction: column;

  > .lrc-box {
    position: relative;

    flex: 1;
    min-height: 0;

    &::before {
      content: '';
      width: 100%;
      height: 1px;

      position: absolute;
      top: 50%;
      left: 0;

      background: rgb(255 0 0 / 0.15);
    }
  }
`,lrcStyle={height:"100%",padding:"5px 0"},auto_scroll_Line=styled_components_browser_esm.Ay.div`
  min-height: 10px;
  padding: 5px 20px;

  font-size: 16px;
  text-align: center;

  ${_ref=>{let{active}=_ref;return styled_components_browser_esm.AH`
    color: ${active?"green":"black"};
  `}}
`,log=console.log.bind(console);function LrcDemo(_ref2){let{lrc,recoverAutoScrollInterval,verticalSpace}=_ref2;const{currentMillisecond,setCurrentMillisecond,reset,play,pause}=(0,use_timer.A)(2),{signal,recoverAutoScrollImmediately}=(0,src.K6)();return(0,jsx_runtime.jsxs)(Root,{children:[(0,jsx_runtime.jsx)(control.A,{onPlay:play,onPause:pause,onReset:reset,current:currentMillisecond,setCurrent:setCurrentMillisecond,recoverAutoScrollImmediately}),(0,jsx_runtime.jsx)("div",{className:"lrc-box",children:(0,jsx_runtime.jsx)(src.K2,{lrc,lineRenderer:_ref3=>{let{active,line:{content}}=_ref3;return(0,jsx_runtime.jsx)(auto_scroll_Line,{active,children:content})},currentMillisecond,verticalSpace,style:lrcStyle,recoverAutoScrollSingal:signal,recoverAutoScrollInterval,onLineUpdate:log,onAutoScrollChange:log})})]})}LrcDemo.displayName="LrcDemo";const auto_scroll=LrcDemo;try{LrcDemo.displayName="LrcDemo",LrcDemo.__docgenInfo={description:"",displayName:"LrcDemo",props:{lrc:{defaultValue:null,description:"",name:"lrc",required:!0,type:{name:"string"}},recoverAutoScrollInterval:{defaultValue:null,description:"",name:"recoverAutoScrollInterval",required:!0,type:{name:"number"}},verticalSpace:{defaultValue:null,description:"",name:"verticalSpace",required:!0,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["examples/lrc/auto_scroll.tsx#LrcDemo"]={docgenInfo:LrcDemo.__docgenInfo,name:"LrcDemo",path:"examples/lrc/auto_scroll.tsx#LrcDemo"})}catch(__react_docgen_typescript_loader_error){}var data=__webpack_require__("./examples/data.ts");const index_stories={title:"Lrc"},AutoScrollTemplate=args=>(0,jsx_runtime.jsx)(auto_scroll,{...args});AutoScrollTemplate.displayName="AutoScrollTemplate";const AutoScroll=AutoScrollTemplate.bind({});AutoScroll.args={lrc:data.gJ,recoverAutoScrollInterval:5e3,verticalSpace:!0};const StaticTemplate=args=>(0,jsx_runtime.jsx)(lrc_static,{...args});StaticTemplate.displayName="StaticTemplate";const Static=StaticTemplate.bind({});Static.args={lrc:data.gJ},AutoScroll.parameters={...AutoScroll.parameters,docs:{...AutoScroll.parameters?.docs,source:{originalSource:"args => <AutoScrollComponent {...args} />",...AutoScroll.parameters?.docs?.source}}},Static.parameters={...Static.parameters,docs:{...Static.parameters?.docs,source:{originalSource:"args => <StaticComponent {...args} />",...Static.parameters?.docs?.source}}};const __namedExportsOrder=["AutoScroll","Static"]},"./src/index.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{K2:()=>components_lrc,o9:()=>components_multiple_lrc,K6:()=>use_recover_auto_scroll_immediately});var react=__webpack_require__("./node_modules/react/index.js");var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const baseStyle={outline:"none",boxSizing:"border-box",scrollBehavior:"smooth",overflow:"auto"};function Root(_ref,ref){let{style,...props}=_ref;const combinedStyle=(0,react.useMemo)((()=>({...baseStyle,...style})),[style]);return(0,jsx_runtime.jsx)("div",{...props,style:combinedStyle,ref})}Root.displayName="Root";const base_lrc_root=(0,react.memo)((0,react.forwardRef)(Root));try{root.displayName="root",root.__docgenInfo={description:"",displayName:"root",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/base_lrc/root.tsx#root"]={docgenInfo:root.__docgenInfo,name:"root",path:"src/components/base_lrc/root.tsx#root"})}catch(__react_docgen_typescript_loader_error){}const style={height:"50%"};function Space(){return(0,jsx_runtime.jsx)("div",{style})}Space.displayName="Space";const space=(0,react.memo)(Space);const use_line_index=function useLineIndex(lines,currentMillisecond){let index=0;for(const{length}=lines;index<=length;index+=1){const line=lines[index];if(!line||line.startMillisecond>currentMillisecond)break}return index-1},DEFAULT_PROPS={currentMillisecond:-1,verticalSpace:!1,recoverAutoScrollInterval:5e3,recoverAutoScrollSingal:!1};const utils_throttle=function throttle(f){let wait=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,lastEmitTimestamp=0;return function(){const now=Date.now();if(now-lastEmitTimestamp>=wait)return lastEmitTimestamp=now,f(...arguments)}},SCROLLABLE_KEYS=[" ","ArrowUp","ArrowDown"];const use_event=function useEvent(callback){const callbackRef=(0,react.useRef)();callbackRef.current=callback;return(0,react.useCallback)((function(){return callbackRef.current(...arguments)}),[])};var ResizeObserver_es=__webpack_require__("./node_modules/resize-observer-polyfill/dist/ResizeObserver.es.js");const utils_debounce=function debounce(f){let timer,wait=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300;return function(){for(var _len=arguments.length,params=new Array(_len),_key=0;_key<_len;_key++)params[_key]=arguments[_key];globalThis.clearTimeout(timer),timer=globalThis.setTimeout((()=>f(params)),wait)}},base_lrc_space=(0,jsx_runtime.jsx)(space,{});function BaseLrc(_ref,ref){let{lines,lineRenderer,currentMillisecond=DEFAULT_PROPS.currentMillisecond,verticalSpace=DEFAULT_PROPS.verticalSpace,recoverAutoScrollInterval=DEFAULT_PROPS.recoverAutoScrollInterval,recoverAutoScrollSingal=DEFAULT_PROPS.recoverAutoScrollSingal,onLineUpdate,onAutoScrollChange,onWheel,onKeyDown,onPointerDown,onPointerUp,onPointerMove,...props}=_ref;const rootRef=(0,react.useRef)(null),lineIndex=use_line_index(lines,currentMillisecond),{autoScroll,onWheel:onLocalAutoScrollWheel,onKeyDown:onLocalAutoScrollKeyDown,onPointerDown:onLocalAutoScrollPointerDown,onPointerUp:onLocalAutoScrollPointerUp,onPointerMove:onLocalAutoScrollPointerMove}=(_ref=>{let{recoverAutoScrollInterval,recoverAutoScrollSingal,onAutoScrollChange}=_ref;const[autoScroll,setAutoScroll]=(0,react.useState)(!0),timerRef=(0,react.useRef)(),handleUserScroll=(0,react.useCallback)((()=>{globalThis.clearTimeout(timerRef.current),setAutoScroll(!1),timerRef.current=globalThis.setTimeout((()=>setAutoScroll(!0)),recoverAutoScrollInterval)}),[recoverAutoScrollInterval]),pointerDownRef=(0,react.useRef)(!1),onPointerDown=(0,react.useCallback)((()=>{pointerDownRef.current=!0}),[]),onPointerUp=(0,react.useCallback)((()=>{pointerDownRef.current=!1}),[]),onPointerMove=(0,react.useMemo)((()=>utils_throttle((()=>{pointerDownRef.current&&handleUserScroll()}))),[handleUserScroll]),onKeyDown=(0,react.useMemo)((()=>utils_throttle((event=>{SCROLLABLE_KEYS.includes(event.key)&&handleUserScroll()}))),[handleUserScroll]),onWheel=(0,react.useMemo)((()=>utils_throttle(handleUserScroll)),[handleUserScroll]);return(0,react.useEffect)((()=>{setAutoScroll(!0)}),[recoverAutoScrollSingal]),(0,react.useEffect)((()=>{onAutoScrollChange&&onAutoScrollChange({autoScroll})}),[autoScroll,onAutoScrollChange]),(0,react.useEffect)((()=>()=>globalThis.clearTimeout(timerRef.current)),[]),{autoScroll,onWheel,onKeyDown,onPointerDown,onPointerUp,onPointerMove}})({recoverAutoScrollInterval,recoverAutoScrollSingal,onAutoScrollChange});(_ref=>{let{root,autoScroll,lineIndex,lines,verticalSpace}=_ref;const indexMapRef=(0,react.useRef)(new Map),scrollToCurrentLine=(0,react.useCallback)((()=>{if(!root)return;const indexMap=indexMapRef.current.get(lineIndex);root.scrollTop=indexMap?indexMap.offsetTop-.5*root.clientHeight+indexMap.height/2:0}),[lineIndex,root]);(0,react.useLayoutEffect)((()=>{if(root){const caculateIndexMap=()=>{const indexMap=new Map,lrcLineNodeList=root.querySelectorAll(".react-lrc-line");for(let i=0,{length}=lrcLineNodeList;i<length;i+=1){const lrcLineNode=lrcLineNodeList[i];indexMap.set(i,{height:lrcLineNode.clientHeight,offsetTop:lrcLineNode.offsetTop})}indexMapRef.current=indexMap};caculateIndexMap();const resizeDetector=new ResizeObserver_es.A(utils_debounce(caculateIndexMap));return resizeDetector.observe(root),()=>resizeDetector.disconnect()}}),[root,lines,verticalSpace]),(0,react.useLayoutEffect)((()=>{autoScroll&&scrollToCurrentLine()}),[autoScroll,scrollToCurrentLine,lines,verticalSpace])})({root:rootRef.current,autoScroll,lineIndex,lines,verticalSpace}),(0,react.useEffect)((()=>{onLineUpdate&&onLineUpdate({index:lineIndex,line:lines[lineIndex]??null})}),[onLineUpdate,lineIndex,lines]),(0,react.useImperativeHandle)(ref,(()=>rootRef.current));const onWheelWrapper=use_event((event=>(onLocalAutoScrollWheel(),onWheel&&onWheel(event)))),onKeyDownWrapper=use_event((event=>(onLocalAutoScrollKeyDown(event),onKeyDown&&onKeyDown(event)))),onPointerDownWrapper=use_event((event=>(onLocalAutoScrollPointerDown(),onPointerDown?.(event)))),onPointerUpWrapper=use_event((event=>(onLocalAutoScrollPointerUp(),onPointerUp?.(event)))),onPointerMoveWrapper=use_event((event=>(onLocalAutoScrollPointerMove(),onPointerMove?.(event)))),lineNodes=(0,react.useMemo)((()=>lines.map(((line,index)=>(0,jsx_runtime.jsx)("div",{className:"react-lrc-line",children:lineRenderer({index,active:lineIndex===index,line})},line.id)))),[lineIndex,lineRenderer,lines]);return(0,jsx_runtime.jsxs)(base_lrc_root,{tabIndex:-1,...props,onWheel:onWheelWrapper,onKeyDown:onKeyDownWrapper,onPointerDown:onPointerDownWrapper,onPointerUp:onPointerUpWrapper,onPointerMove:onPointerMoveWrapper,ref:rootRef,children:[verticalSpace?base_lrc_space:null,lineNodes,verticalSpace?base_lrc_space:null]})}BaseLrc.displayName="BaseLrc";const base_lrc=(0,react.forwardRef)(BaseLrc);try{baselrc.displayName="baselrc",baselrc.__docgenInfo={description:"",displayName:"baselrc",props:{lines:{defaultValue:null,description:"",name:"lines",required:!0,type:{name:"Line[]"}},lineRenderer:{defaultValue:null,description:"",name:"lineRenderer",required:!0,type:{name:"(payload: { index: number; active: boolean; line: Line; }) => ReactNode"}},currentMillisecond:{defaultValue:null,description:"",name:"currentMillisecond",required:!1,type:{name:"number"}},verticalSpace:{defaultValue:null,description:"",name:"verticalSpace",required:!1,type:{name:"boolean"}},recoverAutoScrollInterval:{defaultValue:null,description:"",name:"recoverAutoScrollInterval",required:!1,type:{name:"number"}},recoverAutoScrollSingal:{defaultValue:null,description:"",name:"recoverAutoScrollSingal",required:!1,type:{name:"boolean"}},onLineUpdate:{defaultValue:null,description:"",name:"onLineUpdate",required:!1,type:{name:"((line: { index: number; line: Line | null; }) => void)"}},onAutoScrollChange:{defaultValue:null,description:"",name:"onAutoScrollChange",required:!1,type:{name:"((payload: { autoScroll: boolean; }) => void)"}},ref:{defaultValue:null,description:"",name:"ref",required:!0,type:{name:"ForwardedRef<HTMLDivElement>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/base_lrc/base_lrc.tsx#baselrc"]={docgenInfo:baselrc.__docgenInfo,name:"baselrc",path:"src/components/base_lrc/base_lrc.tsx#baselrc"})}catch(__react_docgen_typescript_loader_error){}const components_base_lrc=base_lrc;var index_esm=__webpack_require__("./node_modules/clrc/dist/index.esm.js");const get_random_string=function getRandomString(){return Math.random().toString(36).substring(2,8)};const use_lrc=function useLrc(lrc){return(0,react.useMemo)((()=>(0,index_esm.qg)(lrc).filter((line=>line.type===index_esm.Vv.LYRIC)).map((l=>({id:get_random_string(),lineNumber:l.lineNumber,raw:l.raw,startMillisecond:l.startMillisecond,content:l.content}))).sort(((a,b)=>a.startMillisecond-b.startMillisecond))),[lrc])},Lrc=(_ref,ref)=>{let{lrc,...props}=_ref;const lines=use_lrc(lrc);return(0,jsx_runtime.jsx)(components_base_lrc,{...props,lines,ref})};Lrc.displayName="Lrc";const components_lrc=(0,react.forwardRef)(Lrc);function multiple_lrc_Lrc(_ref,ref){let{lrcs,...props}=_ref;const lines=(lrcs=>{const lines=(0,react.useMemo)((()=>{const map=new Map;for(const lrc of lrcs){const list=(0,index_esm.qg)(lrc).filter((l=>l.type===index_esm.Vv.LYRIC));for(const item of list){const current=map.get(item.startMillisecond)||{id:get_random_string(),startMillisecond:item.startMillisecond,children:[]};current.children.push({id:get_random_string(),lineNumber:item.lineNumber,raw:item.raw,content:item.content}),map.set(item.startMillisecond,current)}}return[...map.values()].sort(((a,b)=>a.startMillisecond-b.startMillisecond))}),[lrcs.length,...lrcs]);return lines})(lrcs);return(0,jsx_runtime.jsx)(components_base_lrc,{...props,lines,ref})}multiple_lrc_Lrc.displayName="Lrc";const components_multiple_lrc=(0,react.forwardRef)(multiple_lrc_Lrc);const use_recover_auto_scroll_immediately=function useRecoverAutoScrollImmediately(){const[signal,setSignal]=(0,react.useState)(!1);return{signal,recoverAutoScrollImmediately:(0,react.useCallback)((()=>setSignal((s=>!s))),[])}}}}]);
//# sourceMappingURL=lrc-index-stories.99777abe.iframe.bundle.js.map